<div *ngIf="post" class="l-post">
    <div class="m-cover m-cover--center m-cover--tint" #cover>
        <div class="m-cover__text m-cover__text--light">
            <p class="a-subsubheader">
                <a *ngIf="backEnabled" class="a-link a-link--light a-subsubheader a-breadcrumb" [routerLink]="" (click)="back()">
                    &lt;- Back
                </a>
                Posted {{post.dateCreated | date: 'fullDate'}} 
                <ng-container *ngIf="post.categories.length > 0">
                    under <a class="a-link a-link--light" routerLink="/blog" [queryParams]="{'category': post.categories[0].name.toLowerCase()}">{{post.categories[0].name | lowercase}}</a>
                </ng-container>
                &#9900;
                {{ post.contents | readtime }} minute read
            </p>
            <p class="a-header" [innerHTML]="domSanitizer.bypassSecurityTrustHtml(post.title)"></p>
            <p class="a-subheader" [innerHTML]="post.summary"></p>
            <ul class="m-tags">
                <li class="m-tags__item" *ngFor="let tag of post.tags">
                    <a class="m-tags__tag a-link a-link--light" routerLink="/blog" [queryParams]="{'tag': tag.name}">{{tag.name}}</a>
                </li>
            </ul>
        </div>
        <img    *ngIf="post.featureImage.urlFull"
                class="m-cover__image"
                src="{{post.featureImage.urlSmall}}"
                [lazyLoad]="post.featureImage.srcSet"
                [useSrcset]="true"
                [scrollTarget]="this.windowService.getNativeWindow().document.getElementById('bleed')"
                [offset]="100"
                alt="{{post.featureImage.altText}}" />
    </div>
    <div class="o-post-list">
        <ng-container *ngFor="let section of post.contents" class="o-post-list__contents">
            <ng-container *ngIf="section.type === PostSectionType.TEXT">
                <div *ngIf="section.content.trim() != ''" class="o-post-list__contents" [innerHTML]="domSanitizer.bypassSecurityTrustHtml(section.content)"></div>
                <div *ngIf="section.content.trim() == ''" class="o-post-list__contents">
                    <p>
                        This article is under construction! Try again later...
                    </p>
                </div>
            </ng-container>
            <ng-container *ngIf="section.type === PostSectionType.IMAGE">
                <div class="o-post-list__contents">
                    <img    src="{{section.image.urlSmall}}"
                            [lazyLoad]="section.image.srcSet"
                            [useSrcset]="true"
                            [offset]="100"
                            [scrollTarget]="this.windowService.getNativeWindow().document.getElementById('bleed')"
                            alt="{{section.image.altText}}" />
                </div>
            </ng-container>
            <ng-container *ngIf="section.type === PostSectionType.IMAGE_CAROUSEL">
                <div class="o-post-list__contents">
                    <portfolio-carousel [imageCarousel]="section.imageCarousel"></portfolio-carousel>
                </div>
            </ng-container>
        </ng-container>
        <div *ngIf="post.related.length > 0" class="o-post-list__related m-inset m-inset--dark">
            <div class="m-inset__contents">
                <h2>
                    Related Posts
                </h2>
                <ng-container *ngFor="let related of post.related">
                    <blog-item [blogPost]="related"></blog-item>
                </ng-container>
            </div>
        </div>
        <div class="o-post-list__footer">
            <p class="o-post-list__scroll">
                <a class="a-link a-link--light" [routerLink]="" (click)="scrollToTop()">
                    Scroll Up
                </a>
            </p>
            <p class="o-post-list__social">
                <ng-container *ngIf="post.dateEdited !== dateCreated">Last edited {{post.dateEdited | date: 'fullDate'}}.</ng-container> Want to share this post? <a class="a-link a-link--light" [routerLink]="" ngxClipboard [cbContent]="this.windowService.getNativeWindow().location.href" (cbOnSuccess)="copyMsg = 'Link copied'">{{copyMsg}}</a>
            </p>
        </div>
    </div>
</div>